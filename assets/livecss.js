var livecss={pollFrequency:1E3,outstandingRequests:{},filesLastModified:{},watchTimers:{},watchAll:function(){this.unwatchAll();var a=setInterval(this.proxy(function(){for(var a=document.getElementsByTagName("link"),b=["screen","handheld","all",""],d=0;d<a.length;d++){var e=(a[d].getAttribute("media")||"").toLowerCase();"stylesheet"==a[d].getAttribute("rel")&&0<=livecss.indexOf(b,e)&&this.isLocalLink(a[d])&&this.refreshLinkElement(a[d])}}),this.pollFrequency);this.watchTimers.all=a},watch:function(a){var c=
a.getAttribute("href");this.unwatch(c);this.watchTimers[c]=setInterval(this.proxy(function(){var a=this.linkElementWithHref(c);this.refreshLinkElement(a)}),this.pollFrequency)},unwatchAll:function(){for(var a in this.watchTimers)this.unwatch(a)},unwatch:function(a){null!=this.watchTimers[a]&&(clearInterval(this.watchTimers[a]),delete this.watchTimers[a],delete this.outstandingRequests[a])},linkElementWithHref:function(a){for(var c=document.getElementsByTagName("link"),b=0;b<c.length;b++)if(c[b].href==
a)return c[b]},replaceLinkElement:function(a,c){var b=a.parentNode,d=a.nextSibling,e=this.addCacheBust(a.href),f=document.createElement("link");f.href=e;f.setAttribute("rel","stylesheet");d?b.insertBefore(f,d):b.appendChild(f);var g=setInterval(this.proxy(function(){this.isCssElementLoaded(f)&&("undefined"!=typeof console&&console.log("CSS refreshed:",this.removeCacheBust(e)),clearInterval(g),delete this.outstandingRequests[this.removeCacheBust(e)],b.removeChild(a))}),100)},refreshLinkElement:function(a){var c=
this.removeCacheBust(a.getAttribute("href"));if(!this.outstandingRequests[c]){var b=new XMLHttpRequest;this.outstandingRequests[c]=b;var d=this.addCacheBust(c);b.onreadystatechange=this.proxy(function(e){4==b.readyState&&(delete this.outstandingRequests[c],200==b.status||304==b.status)&&(e=Date.parse(b.getResponseHeader("Last-Modified")),!this.filesLastModified[c]||this.filesLastModified[c]<e)&&(this.filesLastModified[c]=e,this.replaceLinkElement(a,d))});b.open("HEAD",d);b.send(null)}},isCssElementLoaded:function(a){try{return a.sheet&&
0<a.sheet.cssRules.length}catch(c){}return!1},isLocalLink:function(a){return 0==a.href.search(new RegExp("^/|^"+document.location.protocol+"//"+document.location.host))},addCacheBust:function(a){return this.removeCacheBust(a)+"?cache_bust="+(new Date).getTime()},removeCacheBust:function(a){return a.replace(/\?cache_bust=[^&]+/,"")},proxy:function(a){var c=this;return function(){return a.apply(c,[])}},indexOf:function(a,c){for(var b=0;b<a.length;b++)if(a[b]==c)return b;return-1},addEventListener:function(a,
c,b){a.attachEvent?a.attachEvent("on"+c,b):a.addEventListener(c,b,!1)}};0<=window.location.search.toString().indexOf("startlivecss=true")&&livecss.addEventListener(window,"load",function(){livecss.watchAll()});